<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="author" content="Untree.co">
  <link rel="shortcut icon" href="favicon.png">
  <meta name="description" content="" />
  <meta name="keywords" content="bootstrap, bootstrap4" />

  <!-- Bootstrap CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link href="css/tiny-slider.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
  <title>커뮤니티 글 작성</title>

  <style>
    body {
        font-family: 'Arial', sans-serif;
        margin: 0;
        background-color: #f9f9f9;
    }

    .container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
    }

    .form-group {
        margin-bottom: 20px;
    }

    .form-group label {
        display: block;
        font-weight: bold;
        margin-bottom: 10px;
    }

    .form-control {
        width: 100%;
        padding: 10px;
        box-sizing: border-box;
    }

    .form-control[type="file"] {
        padding: 3px;
    }

    .btn-group {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 20px;
    }

    .btn-group button {
        background-color: #4CAF50;
        color: white;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        font-size: 16px;
    }

    .btn-group button:hover {
        background-color: #45a049;
    }

    .inline-group {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .inline-group .form-group {
        flex: 1;
        margin-right: 10px;
    }

    .inline-group .form-group:last-child {
        margin-right: 0;
    }

    .file-upload {
        display: flex;
        align-items: center;
        margin-bottom: 20px;
    }

    .file-upload label {
        margin-right: 10px;
        font-weight: bold;
        min-width: 110px;
    }

    .file-upload input[type="file"] {
        display: none;
    }

    .file-upload .custom-file-label {
        padding: 10px 15px;
        background-color: #4CAF50;
        color: white;
        border: none;
        cursor: pointer;
        text-align: center;
    }

    .file-upload .file-name {
        margin-left: 15px;
        font-style: italic;
        font-size: 14px;
        flex-grow: 1;
    }
  </style>
</head>

<body>

  <!-- Start Header/Navigation -->
  <nav class="custom-navbar navbar navbar navbar-expand-md navbar-dark bg-dark" arial-label="Furni navigation bar">
    <div class="container">
      <a class="navbar-brand" href="index.html">Sports Spot<span>.</span></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsFurni" aria-controls="navbarsFurni" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarsFurni">
        <ul class="custom-navbar-nav navbar-nav ms-auto mb-2 mb-md-0">
          <li class="nav-item">
            <a class="nav-link" href="index.html">메인화면</a>
          </li>
          <li><a class="nav-link" href="reservation.html">스포츠 시설 정보</a></li>
          <li class="active"><a class="nav-link" href="contact.html">커뮤니티</a></li>
          <li><a class="nav-link" href="mypage.html">마이페이지</a></li>
        </ul>
        <ul class="custom-navbar-cta navbar-nav mb-2 mb-md-0 ms-5">
          <li><a class="nav-link" href="login.html"><img src="images/user.svg"></a></li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- End Header/Navigation -->

 <!-- Start Hero Section -->
 <div class="hero">
  <div class="container">
    <div class="row justify-content-between">
      <div class="col-lg-5">
        <div class="intro-excerpt">
          <h1>커뮤니티</h1>
        </div>
      </div>
    </div>
  </div>
</div>

  <!-- 게시물 작성 섹션 시작 -->
  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-lg-12">
        <div class="card">
          <div class="card-body">
            <form id="postForm" onsubmit="submitPost(event)">

              <!-- 지역 및 종목 선택 섹션 -->
              <div class="inline-group">
                <div class="form-group">
                  <label for="regionSelect">지역 선택</label>
                  <select class="form-control" id="regionSelect">
                    <option>강남</option>
                    <option>강동</option>
                    <option>강북</option>
                    <option>강서</option>
                    <option>강남</option>
                    <option>관악</option>
                    <option>광진</option>
                    <option>구로</option>
                    <option>금천</option>
                    <option>노원</option>
                    <option>도봉</option>
                    <option>동대문</option>
                    <option>동작</option>
                    <option>마포</option>
                    <option>서대문</option>
                    <option>서초</option>
                    <option>성동</option>
                    <option>성북</option>
                    <option>송파</option>
                    <option>양천</option>
                    <option>영등포</option>
                    <option>용산</option>
                    <option>은평</option>
                    <option>종로</option>
                    <option>중구</option>
                    <option>중랑</option>
                  </select>
                </div>

                <div class="form-group">
                  <label for="categorySelect">종목 선택</label>
                  <select class="form-control" id="categorySelect">
                    <option>게이트볼</option>
                    <option>골프</option>
                    <option>농구</option>
                    <option>배구</option>
                    <option>배드민턴</option>
                    <option>빙상</option>
                    <option>수영</option>
                    <option>야구</option>
                    <option>족구</option>
                    <option>축구</option>
                    <option>테니스</option>
                    <option>풋살</option>
                  </select>
                </div>
              </div>

              <!-- 제목 및 내용 섹션 -->
              <div class="mb-3">
                <label for="postTitle" class="form-label">제목</label>
                <input type="text" class="form-control" id="postTitle" placeholder="제목을 입력하세요" required>
              </div>
              <div class="mb-3">
                <label for="postContent" class="form-label">내용</label>
                <textarea class="form-control" id="postContent" rows="10" placeholder="내용을 입력하세요" required></textarea>
              </div>

              <!-- 파일 업로드 섹션 -->
              <div class="file-upload">
                <label for="imageUpload">사진 업로드</label>
                <label class="custom-file-label" for="imageUpload">파일 선택</label>
                <input type="file" id="imageUpload" accept="image/*" onchange="showFileName(this, 'imageFileName')">
                <span class="file-name" id="imageFileName">파일 없음</span>
              </div>

              <div class="file-upload">
                <label for="videoUpload">동영상 업로드</label>
                <label class="custom-file-label" for="videoUpload">파일 선택</label>
                <input type="file" id="videoUpload" accept="video/*" onchange="showFileName(this, 'videoFileName')">
                <span class="file-name" id="videoFileName">파일 없음</span>
              </div>

              <!-- 버튼 섹션 -->
              <div class="btn-group">
                <button type="button" class="btn-secondary" onclick="saveDraft()">임시 저장</button>
                <button type="button" class="btn-secondary" onclick="loadDraft()">불러오기</button>
                <button type="submit" class="btn-secondary">작성하기</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 스크립트 -->
  <script>
    // 임시 저장 기능
    function saveDraft() {
      const title = document.getElementById('postTitle').value;
      const content = document.getElementById('postContent').value;
      const region = document.getElementById('regionSelect').value;
      const category = document.getElementById('categorySelect').value;
  
      if (title || content || region || category) {
        localStorage.setItem('draftTitle', title);
        localStorage.setItem('draftContent', content);
        localStorage.setItem('draftRegion', region);
        localStorage.setItem('draftCategory', category);
        alert('임시 저장되었습니다.');
      } else {
        alert('저장할 내용이 없습니다.');
      }
    }
  
    // 불러오기 기능
    function loadDraft() {
      const savedTitle = localStorage.getItem('draftTitle');
      const savedContent = localStorage.getItem('draftContent');
      const savedRegion = localStorage.getItem('draftRegion');
      const savedCategory = localStorage.getItem('draftCategory');
  
      if (savedTitle || savedContent || savedRegion || savedCategory) {
        if (confirm('임시 저장된 내용을 불러오시겠습니까?')) {
          document.getElementById('postTitle').value = savedTitle;
          document.getElementById('postContent').value = savedContent;
          document.getElementById('regionSelect').value = savedRegion;
          document.getElementById('categorySelect').value = savedCategory;
        }
      } else {
        alert('불러올 임시 저장된 내용이 없습니다.');
      }
    }
  
    // 게시물 작성 시 임시 저장된 내용 삭제 후 리다이렉트
    function submitPost(event) {
      event.preventDefault();
      localStorage.removeItem('draftTitle');
      localStorage.removeItem('draftContent');
      localStorage.removeItem('draftRegion');
      localStorage.removeItem('draftCategory');
      alert('게시물이 작성되었습니다.');
  
      // 작성 완료 후 contact.html로 이동
      window.location.href = 'contact.html';
    }
  
    // 파일명 표시 기능
    function showFileName(input, targetId) {
      const fileName = input.files.length > 0 ? input.files[0].name : '파일 없음';
      document.getElementById(targetId).textContent = fileName;
    }
  
    // 제목 및 내용 입력 확인 기능
    function validateForm() {
      const title = document.getElementById('postTitle').value.trim();
      const content = document.getElementById('postContent').value.trim();
  
      if (!title) {
        alert("제목을 입력해 주세요.");
        return false;
      }
  
      if (!content) {
        alert("내용을 입력해 주세요.");
        return false;
      }
  
      return true;
    }
  
    // 기존 submitPost 함수를 실행하기 전에 validateForm을 호출하여 검증
    document.getElementById('postForm').onsubmit = function(event) {
      if (!validateForm()) {
        event.preventDefault();
      } else {
        submitPost(event);
      }
    };
  </script>  
  
</body>
</html>